{"version":3,"sources":["webpack:///webpack/bootstrap 768c2dd2be08939aa700","webpack:///external \"mongoose\"","webpack:///./server/config/index.js","webpack:///./server/db/models/mainSchema.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///./server/db/models/beverage.js","webpack:///./server/db/models/fCourse.js","webpack:///./server/db/models/sCourse.js","webpack:///external \"koa-router\"","webpack:///./server/index.js","webpack:///external \"koa\"","webpack:///./server/db/index.js","webpack:///./server/middleware/index.js","webpack:///external \"koa-static\"","webpack:///external \"koa-bodyparser\"","webpack:///./server/routes/index.js","webpack:///./server/routes/crudModels.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/routes/admin.js","webpack:///external \"otplib/authenticator\"","webpack:///external \"crypto\"","webpack:///./server/middleware/error.js","webpack:///external \"kcors\""],"names":["app","name","version","database","driver","host","port","dbname","username","password","options","server","static_dir","root","session","secretKey","mongoose","Schema","type","String","required","price","Number","picture","description","beverageSchema","beverage","model","fCourseSchema","fCourse","sCourseSchema","sCourse","process","env","HOST","PORT","config","middlewares","listen","connect","Promise","fakeDB","value","products","use","serve","bodyParser","cors","origin","credentials","allowHeaders","routes","crudRouter","middleware","adminRoute","models","prefix","get","ctx","next","dataForReturn","modelName","find","body","params","nameModel","throw","Object","keys","indexOf","console","log","id","_id","post","request","status","newBev","save","data","put","findByIdAndUpdate","res","delete","findByIdAndRemove","err","doc","authenticator","crypto","disabledIPs","ip","unixTimeOut","unixNow","Math","round","Date","getTime","response","login","message","userIP","didDisabledIp","findIndex","splice","token","generate","didTokenCorrect","push","headersSent","emit"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 768c2dd2be08939aa700","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","'use strict'\n\n// const dbname = process.env.NODE_ENV === 'test' ? 'koatest' : 'koa'\n\nexport default {\n  app: {\n    name: 'something',\n    version: '1.0.0'\n  },\n  database: {\n    driver: 'mongo',\n    host: 'ds113849.mlab.com',\n    port: 13849,\n    dbname: 'yellow-bike',\n    username: 'server',\n    password: 'fT9MqtLn',\n    options: {\n    }\n  },\n  server: {\n    port: 3030\n  },\n  static_dir: {\n    root: './static',\n    options: {}\n  },\n  session: {\n    secretKey: 'yelBik'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","import mongoose from 'mongoose'\r\n\r\nexport default new mongoose.Schema({\r\n    name:{\r\n      type:String,\r\n      required:true,\r\n    },\r\n    price:{\r\n      type:Number,\r\n      required:true,\r\n    },\r\n  \r\n    picture:String,\r\n    description: String,\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/models/mainSchema.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 3\n// module chunks = 0","import mongoose from 'mongoose'\r\nimport mainSchema from './mainSchema'\r\n\r\nconst beverageSchema = mainSchema;\r\n\r\nconst beverage = mongoose.model('beverage', beverageSchema)\r\n\r\nexport default beverage\n\n\n// WEBPACK FOOTER //\n// ./server/db/models/beverage.js","import mongoose from 'mongoose'\r\nimport mainSchema from './mainSchema'\r\n\r\nconst fCourseSchema = mainSchema;\r\n\r\nconst fCourse = mongoose.model('firstCourse', fCourseSchema)\r\n\r\nexport default fCourse\n\n\n// WEBPACK FOOTER //\n// ./server/db/models/fCourse.js","import mongoose from 'mongoose'\r\nimport mainSchema from './mainSchema'\r\n\r\nconst sCourseSchema = mainSchema;\r\n\r\nconst sCourse = mongoose.model('secondCourse', sCourseSchema)\r\n\r\nexport default sCourse\n\n\n// WEBPACK FOOTER //\n// ./server/db/models/sCourse.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 7\n// module chunks = 0","'use strict'\n\nimport Koa from 'koa'\nimport config from './config'\nimport db from './db/index' // хз где еще вызвать\nimport middlewares from './middleware/index'\n\nconst app = new Koa()\nconst host = process.env.HOST\nconst port = process.env.PORT || config.server.port\n\nmiddlewares(app)\n\napp.listen(port, host)\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 9\n// module chunks = 0","import mongoose from 'mongoose'\r\nimport config from '../config/index'\r\n\r\nimport beverage from './models/beverage'\r\nimport fCourse from './models/fCourse'\r\nimport sCourse from './models/sCourse'\r\n\r\nconst { username, password, host, port, dbname} = config.database;\r\n\r\nmongoose.connect(`mongodb://${username}:${password}@${host}:${port}/${dbname}`)\r\n\r\n\r\nmongoose.Promise = Promise;\r\n\r\nconst fakeDB= [\r\n  {\r\n      name:\"Напитки\",\r\n      value:[\r\n          {name:\"чай\",price:\"40руб\"},\r\n          {name:\"кофе\",price:\"60руб\"}\r\n      ]\r\n  },\r\n  \r\n  {\r\n      name:\"Горячее\",\r\n      value:[\r\n          {name:\"Плов\",price:\"120руб\"},\r\n          {name:\"Шашлык\",price:\"200руб\"}\r\n      ]\r\n  }\r\n  \r\n  \r\n  ]\r\n\r\n  const products = fakeDB\r\n\r\n\r\n  export default {\r\n    beverage,\r\n    fCourse,\r\n    sCourse\r\n  };\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/db/index.js","'use strict'\n\nimport serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport config from '../config'\nimport routes from '../routes/index'\nimport err from './error'\nimport cors from 'kcors'\n\n\n//const routes = router.routes;\n\nexport default (app) => {\n\n  app.use(err)\n\n  \n\n  app.use(serve(config.static_dir.root))\n\n  app.use(bodyParser())\n\n  \n  app.use(cors({\n    origin: 'http://localhost:3000',\n    credentials: false,\n    allowHeaders: ['Origin, X-Requested-With, Content-Type, Accept']\n  }))\n\n\n  routes(app)\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middleware/index.js","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 13\n// module chunks = 0","import crudRouter from './crudModels'\r\nimport adminRoute from './admin'\r\n\r\n\r\nexport default (app) => {\r\n  app.use(crudRouter.middleware())\r\n  app.use(adminRoute.middleware())\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/routes/index.js","import Router from 'koa-router'\r\n\r\nimport beverage from '../db/models/beverage'\r\nimport fCourse from '../db/models/fCourse'\r\nimport sCourse from '../db/models/sCourse'\r\n\r\n\r\nconst models = {\r\n  beverage,\r\n  fCourse,\r\n  sCourse\r\n}\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\nconst crudRouter = new Router({prefix:'/api'})\r\n\r\ncrudRouter\r\n  .get('/allProducts', async (ctx, next) => { //Получение всех\r\n        \r\n    const dataForReturn = {} \r\n\r\n    for(const modelName in models)\r\n      dataForReturn[modelName] = await models[modelName].find()\r\n    \r\n    ctx.body = dataForReturn\r\n\r\n  })\r\n  .get('/:nameModel', async (ctx, next) => { //Получение по id\r\n\r\n    \r\n\r\n    if( !ctx.params.nameModel )\r\n      ctx.throw(500,'nameModel cant be null')\r\n    \r\n    const { nameModel } = ctx.params\r\n\r\n    if( Object.keys(models).indexOf(nameModel) === -1 )\r\n      ctx.throw(500, `model ${nameModel} not found`)\r\n    \r\n    try {\r\n\r\n      const model = models[ctx.params.nameModel];\r\n      ctx.body = await model.find()\r\n\r\n    } catch(e) {\r\n      ctx.body = e\r\n      console.log(e)\r\n    }\r\n\r\n  })\r\n  .get('/:nameModel/:id', async (ctx, next) => { //Получение по id\r\n\r\n    if( !ctx.params.nameModel && !ctx.params.id )\r\n      ctx.throw(500,'id or nameModel cant be null')\r\n    \r\n    const { nameModel } = ctx.params\r\n\r\n    if( Object.keys(models).indexOf(nameModel) === -1 )\r\n      ctx.throw(500, `model ${nameModel} not found`)\r\n\r\n    try {\r\n\r\n      const model = models[nameModel];\r\n      const _id = ctx.params.id;\r\n      ctx.body = await model.find({ _id })\r\n\r\n    } catch(e) {\r\n      ctx.throw(500,e)\r\n    }\r\n\r\n  })\r\n  .post('/',  async (ctx, next) => { // добавление/создание\r\n    \r\n    \r\n    if(!ctx.request.body.name && !ctx.request.body.price && !ctx.request.body.nameModel){\r\n      ctx.status = 500\r\n      ctx.body = 'nameModel or price or name not send'\r\n      return\r\n    }\r\n    try{\r\n      const { nameModel, name, price } = ctx.request.body\r\n      \r\n      const newBev = new models[nameModel]({\r\n        name: name,\r\n        price:price,\r\n      })\r\n\r\n      const data = await newBev.save()\r\n\r\n      ctx.body = data\r\n      \r\n    }catch(e){\r\n      ctx.body = e\r\n      console.log(e)\r\n    }\r\n  })\r\n  .put('/:nameModel/:id', async (ctx, next) => { // изменение\r\n\r\n    if( Object.keys(models).indexOf(nameModel) === -1 )\r\n      ctx.throw(500, `model ${nameModel} not found`)\r\n\r\n    try{\r\n      const res = await models[nameModel].findByIdAndUpdate(ctx.params.id, { price: ctx.params.price })\r\n    }catch(e){\r\n      ctx.body = e\r\n    }\r\n  })\r\n  .delete('/:nameModel/:id', async (ctx, next) => { // удаление\r\n    \r\n    if( Object.keys(models).indexOf(nameModel) === -1 )\r\n      ctx.throw(500, `model ${nameModel} not found`)\r\n\r\n    try{\r\n      await beverage.findByIdAndRemove(ctx.params.id, (err, doc) =>{\r\n        if (err)\r\n          ctx.body = (err)\r\n        else\r\n          ctx.body = (200)\r\n      } )\r\n    }catch(e){\r\n      ctx.body = e\r\n    }\r\n  })\r\n\r\nexport default crudRouter\n\n\n// WEBPACK FOOTER //\n// ./server/routes/crudModels.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 16\n// module chunks = 0","import Router from 'koa-router'\r\n\r\nimport authenticator from 'otplib/authenticator';\r\nimport crypto from 'crypto';\r\n\r\nauthenticator.options = { crypto };\r\n\r\nconst adminRoute = new Router({prefix:'/admin'})\r\n\r\nconst disabledIPs = [ //ip с ожиданием окончания unixTime для повторного ввода кода \r\n  {ip:0, unixTimeOut:0}\r\n ] \r\n\r\nadminRoute\r\n  .post('/code', async (ctx, next) => {\r\n\r\n    const unixNow = Math.round( new Date().getTime() / 1000.0 ) \r\n\r\n    // модель ответа\r\n    const response = {\r\n      unixTimeOut: unixNow + 30,\r\n      login: false,\r\n      message: ''\r\n    }\r\n\r\n    const userIP = ctx.request.ip\r\n\r\n    // поиск по пользователям в таймАуте\r\n    const didDisabledIp = disabledIPs.findIndex( (value) => value.ip === userIP )\r\n\r\n    // в таймАуте \r\n    if(didDisabledIp > -1) {\r\n\r\n      // если время таймАута вышло, то удаляет с disabledIPs\r\n      if( disabledIPs[didDisabledIp].unixTimeOut <= unixNow ){\r\n        console.log(disabledIPs, unixNow)\r\n        disabledIPs.splice(didDisabledIp,1)\r\n        \r\n      }\r\n      else {\r\n        response.message = 'время не вышло'\r\n        response.unixTimeOut = disabledIPs[didDisabledIp].unixTimeOut\r\n        ctx.body = response\r\n        return\r\n      }\r\n    }\r\n\r\n    //проверка кода\r\n    const token = authenticator.generate('RGAs6QgusSdLhX3wpYdLWsfN');\r\n    const didTokenCorrect = ctx.request.body.token === token\r\n\r\n    //код верен\r\n    if( didTokenCorrect ){\r\n      response.message = 'Добро Пожаловать' + userIP\r\n      response.login = true\r\n      ctx.body = response\r\n      return\r\n    }\r\n\r\n    // код не верен\r\n    disabledIPs.push({ ip: userIP, unixTimeOut: response.unixTimeOut })\r\n    response.message = 'Код не верен'\r\n    ctx.body = response\r\n\r\n  })\r\n\r\nexport default adminRoute\n\n\n// WEBPACK FOOTER //\n// ./server/routes/admin.js","module.exports = require(\"otplib/authenticator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"otplib/authenticator\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 19\n// module chunks = 0","export default async (ctx, next) => {\r\n  try {\r\n    await next()\r\n\r\n    if (ctx.status === 404 && ctx.res.headersSent === false) {\r\n      ctx.throw(404)\r\n    }\r\n\r\n    if (ctx.status === 200 && ctx.res.headersSent === false) {\r\n      ctx.body = {\r\n        status: 200,\r\n        data: ctx.body\r\n      }\r\n    }\r\n  } catch (err) {\r\n    ctx.status = err.status || 500\r\n\r\n    ctx.type = 'json'\r\n    ctx.body = {\r\n      status: ctx.status,\r\n      message: err.message\r\n    }\r\n\r\n    ctx.app.emit('error', err, ctx)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/middleware/error.js","module.exports = require(\"kcors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"kcors\"\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}